{% extends "authbase.html" %}

{% block title %}Sign Up | Vendora{% endblock %}

{% block content %}
<div class="min-h-screen flex items-center justify-center bg-background px-4 py-12">
    <div class="w-full max-w-md bg-surface p-8 rounded-2xl shadow-lg border border-gray-200">
        <!-- Page Heading -->
        <h1 class="text-3xl font-bold text-gray-900 text-center mb-8 tracking-tight">
            Create Your Account
        </h1>

        <!-- Signup Form -->
        <form action="{{ url_for('auth.signup') }}" method="POST" class="space-y-6" id="signupForm">
            <!-- Username -->
            <div>
                <label for="username" class="block text-sm font-medium text-secondary mb-1">
                    Username
                </label>
                <input type="text" id="username" name="username" placeholder="Enter your username" required
                    class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary transition duration-150 shadow-sm" />
            </div>

            <!-- Password -->
            <div>
                <label for="password" class="block text-sm font-medium text-secondary mb-1">
                    Password
                </label>
                <input type="password" id="password" name="password" placeholder="Enter your password" required
                    class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary transition duration-150 shadow-sm" />
            </div>

            <!-- Confirm Password -->
            <div>
                <label for="confirm_password" class="block text-sm font-medium text-secondary mb-1">
                    Confirm Password
                </label>
                <input type="password" id="confirm_password" placeholder="Re-enter your password" required
                    class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary transition duration-150 shadow-sm" />
                <p id="passwordError" class="text-red-600 text-sm mt-2 hidden">Passwords do not match.</p>
            </div>

            <!-- Role Selection -->
            <div>
                <label for="role" class="block text-sm font-medium text-secondary mb-1">
                    Register as
                </label>
                <select name="role" id="role" required
                    class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary transition duration-150 shadow-sm bg-white">
                    <option value="">Select a role</option>
                    <option value="customer">Customer</option>
                    <option value="vendor">Vendor</option>
                </select>
            </div>

            <!-- Submit Button -->
            <button type="submit"
                class="w-full py-3 bg-primary text-white font-semibold rounded-lg shadow-md hover:bg-blue-800 transition duration-200 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-opacity-50">
                Sign Up
            </button>
        </form>

        <!-- Already have account -->
        <p class="mt-6 text-center text-sm text-gray-500">
            Already have an account?
            <a href="{{ url_for('auth.login') }}" class="text-primary hover:text-blue-800 font-medium">
                Log in here
            </a>
        </p>
    </div>
</div>

<!-- Password Match Script -->
<script>
    const form = document.getElementById("signupForm");
    const password = document.getElementById("password");
    const confirmPassword = document.getElementById("confirm_password");
    const errorMsg = document.getElementById("passwordError");

    form.addEventListener("submit", function (e) {
        if (password.value !== confirmPassword.value) {
            e.preventDefault();
            errorMsg.classList.remove("hidden");
            confirmPassword.classList.add("border-red-500", "focus:ring-red-500");
        } else {
            errorMsg.classList.add("hidden");
            confirmPassword.classList.remove("border-red-500", "focus:ring-red-500");
        }
    });
</script>
{% endblock %}